<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Disease Predictor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .symptom-description {
            position: absolute;
            left: 100%;
            top: 0;
            margin-left: 10px;
            color: #333;
            font-size: 0.9em;
            background-color: #f0f0f0;
            padding: 5px 10px;
            border-radius: 4px;
            display: none;
            z-index: 10;
            white-space: nowrap;
        }
        .symptom-description.visible {
            display: inline-block;
        }
        .symptom-label {
            position: relative;
            display: inline-flex;
            align-items: center;
            margin-bottom: 5px;
        }
        .info-icon {
            cursor: pointer;
            margin-left: 5px;
        }
        .error-message {
            color: #d32f2f;
            font-size: 0.9em;
            margin-top: 10px;
            display: none;
        }
        .error-message.visible {
            display: block;
        }
        input:disabled {
            background-color: #f0f0f0;
            cursor: not-allowed;
        }
        .description-container {
            margin-top: 20px;
            margin-bottom: 20px;
        }
        .description-container textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            resize: vertical;
        }
        .suggested-symptoms {
            margin-top: 10px;
            color: #555;
        }
        .suggest-button {
            margin-top: 10px;
            padding: 8px 16px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .suggest-button:hover {
            background-color: #0056b3;
        }
        .category {
            margin-bottom: 20px;
        }
        .symptom-categories {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .category {
            flex: 1;
            min-width: 250px;
        }
        .submit-button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #28a745;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .submit-button:hover {
            background-color: #218838;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <h1>Disease Predictor Dashboard</h1>
        </div>
    </header>

    <main>
        <div class="welcome-section">
            <h2>Welcome to Dashboard</h2>
            <p>You have successfully logged in.</p>
        </div>

        <div class="actions">
            <a href="#" class="nav-link"><i class="fas fa-stethoscope"></i> Predict Disease</a> |
            <a href="/logout" class="nav-link"><i class="fas fa-sign-out-alt"></i> Logout</a>
        </div>

        <div class="button-container">
            <button id="symptomButton" class="action-button">Select Symptoms</button>
        </div>

        <div id="symptomsSection" class="symptoms-container" style="display: none;">
            <h3>Select Your Symptoms (2 to 17)</h3>
            <form method="POST" action="/predict" id="symptomForm">
                <div class="symptom-categories">
                    <div class="category">
                        <h4>Skin Symptoms</h4>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="itching"> Itching <span class="info-icon" data-symptom="itching"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="itching">Persistent need to scratch the skin.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="skin_rash"> Skin Rash <span class="info-icon" data-symptom="skin_rash"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="skin_rash">Red, inflamed patches on the skin.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="nodal_skin_eruptions"> Nodal Skin Eruptions <span class="info-icon" data-symptom="nodal_skin_eruptions"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="nodal_skin_eruptions">Small, raised bumps on the skin.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="red_spots_over_body"> Red Spots Over Body <span class="info-icon" data-symptom="red_spots_over_body"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="red_spots_over_body">Red spots scattered across the body.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="pus_filled_pimples"> Pus-Filled Pimples <span class="info-icon" data-symptom="pus_filled_pimples"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="pus_filled_pimples">Pimples containing pus.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" multistate value="blackheads"> Blackheads <span class="info-icon" data-symptom="blackheads"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="blackheads">Small, dark spots on the skin.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="scurring"> Scurring <span class="info-icon" data-symptom="scurring"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="scurring">Rough, scarred skin texture.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="skin_peeling"> Skin Peeling <span class="info-icon" data-symptom="skin_peeling"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="skin_peeling">Flaking or peeling of the skin.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="silver_like_dusting"> Silver-Like Dusting <span class="info-icon" data-symptom="silver_like_dusting"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="silver_like_dusting">Silvery scales on the skin.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="yellow_crust_ooze"> Yellow Crust Ooze <span class="info-icon" data-symptom="yellow_crust_ooze"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="yellow_crust_ooze">Yellow, crusty discharge from skin lesions.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="blister"> Blister <span class="info-icon" data-symptom="blister"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="blister">Fluid-filled bumps on the skin.</span></label><br>
                    </div>

                    <div class="category">
                        <h4>Respiratory Symptoms</h4>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="continuous_sneezing"> Continuous Sneezing <span class="info-icon" data-symptom="continuous_sneezing"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="continuous_sneezing">Frequent, uncontrollable sneezing.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="chills"> Chills <span class="info-icon" data-symptom="chills"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="chills">Feeling cold with shivering.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="cough"> Cough <span class="info-icon" data-symptom="cough"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="cough">Persistent throat irritation causing coughing.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="breathlessness"> Breathlessness <span class="info-icon" data-symptom="breathlessness"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="breathlessness">Difficulty breathing or shortness of breath.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="phlegm"> Phlegm <span class="info-icon" data-symptom="phlegm"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="phlegm">Mucus produced during coughing.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="throat_irritation"> Throat Irritation <span class="info-icon" data-symptom="throat_irritation"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="throat_irritation">Scratchy or sore throat.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="runny_nose"> Runny Nose <span class="info-icon" data-symptom="runny_nose"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="runny_nose">Excessive nasal discharge.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="blood_in_sputum"> Blood in Sputum <span class="info-icon" data-symptom="blood_in_sputum"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="blood_in_sputum">Blood present in coughed-up mucus.</span></label><br>
                    </div>

                    <div class="category">
                        <h4>Gastrointestinal Symptoms</h4>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="acidity"> Acidity <span class="info-icon" data-symptom="acidity"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="acidity">Burning sensation in the stomach or chest.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="stomach_pain"> Stomach Pain <span class="info-icon" data-symptom="stomach_pain"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="stomach_pain">Pain in the abdominal area.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="nausea"> Nausea <span class="info-icon" data-symptom="nausea"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="nausea">Feeling of wanting to vomit.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="indigestion"> Indigestion <span class="info-icon" data-symptom="indigestion"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="indigestion">Difficulty digesting food, bloating.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="abdominal_pain"> Abdominal Pain <span class="info-icon" data-symptom="abdominal_pain"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="abdominal_pain">Pain in the lower abdomen.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="diarrhoea"> Diarrhoea <span class="info-icon" data-symptom="diarrhoea"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="diarrhoea">Frequent, loose bowel movements.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="vomiting"> Vomiting <span class="info-icon" data-symptom="vomiting"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="vomiting">Expelling stomach contents through the mouth.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="bloody_stool"> Bloody Stool <span class="info-icon" data-symptom="bloody_stool"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="bloody_stool">Blood in bowel movements.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="pain_during_bowel_movements"> Pain During Bowel Movements <span class="info-icon" data-symptom="pain_during_bowel_movements"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="pain_during_bowel_movements">Discomfort during defecation.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="pain_in_anal_region"> Pain in Anal Region <span class="info-icon" data-symptom="pain_in_anal_region"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="pain_in_anal_region">Pain around the anus.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="swelling_of_stomach"> Swelling of Stomach <span class="info-icon" data-symptom="swelling_of_stomach"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="swelling_of_stomach">Abdominal bloating or distension.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="belly_pain"> Belly Pain <span class="info-icon" data-symptom="belly_pain"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="belly_pain">Generalized pain in the belly.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="loss_of_appetite"> Loss of Appetite <span class="info-icon" data-symptom="loss_of_appetite"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="loss_of_appetite">Reduced desire to eat.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="increased_appetite"> Increased Appetite <span class="info-icon" data-symptom="increased_appetite"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="increased_appetite">Unusually high desire to eat.</span></label><br>
                    </div>

                    <div class="category">
                        <h4>Musculoskeletal Symptoms</h4>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="joint_pain"> Joint Pain <span class="info-icon" data-symptom="joint_pain"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="joint_pain">Pain in the joints.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="muscle_wasting"> Muscle Wasting <span class="info-icon" data-symptom="muscle_wasting"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="muscle_wasting">Loss of muscle mass.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="knee_pain"> Knee Pain <span class="info-icon" data-symptom="knee_pain"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="knee_pain">Pain in the knee joints.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="stiff_neck"> Stiff Neck <span class="info-icon" data-symptom="stiff_neck"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="stiff_neck">Reduced neck mobility.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="swelling_joints"> Swelling Joints <span class="info-icon" data-symptom="swelling_joints"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="swelling_joints">Inflamed or swollen joints.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="movement_stiffness"> Movement Stiffness <span class="info-icon" data-symptom="movement_stiffness"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="movement_stiffness">Difficulty moving joints.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="neck_pain"> Neck Pain <span class="info-icon" data-symptom="neck_pain"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="neck_pain">Pain in the neck area.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="cramps"> Cramps <span class="info-icon" data-symptom="cramps"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="cramps">Sudden muscle contractions.</span></label><br>
                    </div>

                    <div class="category">
                        <h4>Neurological Symptoms</h4>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="dizziness"> Dizziness <span class="info-icon" data-symptom="dizziness"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="dizziness">Feeling lightheaded or unsteady.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="headache"> Headache <span class="info-icon" data-symptom="headache"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="headache">Pain in the head.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="visual_disturbances"> Visual Disturbances <span class="info-icon" data-symptom="visual_disturbances"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="visual_disturbances">Altered or impaired vision.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="blurred_and_distorted_vision"> Blurred and Distorted Vision <span class="info-icon" data-symptom="blurred_and_distorted_vision"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="blurred_and_distorted_vision">Unclear or warped vision.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="spinning_movements"> Spinning Movements <span class="info-icon" data-symptom="spinning_movements"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="spinning_movements">Sensation of spinning or vertigo.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="loss_of_balance"> Loss of Balance <span class="info-icon" data-symptom="loss_of_balance"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="loss_of_balance">Difficulty maintaining balance.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="weakness_of_one_body_side"> Weakness of One Body Side <span class="info-icon" data-symptom="weakness_of_one_body_side"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="weakness_of_one_body_side">Weakness on one side of the body.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="altered_sensorium"> Altered Sensorium <span class="info-icon" data-symptom="altered_sensorium"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="altered_sensorium">Changes in consciousness or awareness.</span></label><br>
                    </div>

                    <div class="category">
                        <h4>Cardiovascular Symptoms</h4>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="chest_pain"> Chest Pain <span class="info-icon" data-symptom="chest_pain"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="chest_pain">Pain or discomfort in the chest.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="sweating"> Sweating <span class="info-icon" data-symptom="sweating"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="sweating">Excessive perspiration.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="palpitations"> Palpitations <span class="info-icon" data-symptom="palpitations"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="palpitations">Irregular or rapid heartbeats.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="prominent_veins_on_calf"> Prominent Veins on Calf <span class="info-icon" data-symptom="prominent_veins_on_calf"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="prominent_veins_on_calf">Visible, bulging veins on the legs.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="swollen_legs"> Swollen Legs <span class="info-icon" data-symptom="swollen_legs"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="swollen_legs">Swelling in the lower legs.</span></label><br>
                    </div>

                    <div class="category">
                        <h4>Systemic Symptoms</h4>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="fever"> Fever <span class="info-icon" data-symptom="fever"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="fever">Elevated body temperature.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="high_fever"> High Fever <span class="info-icon" data-symptom="high_fever"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="high_fever">Significantly elevated body temperature.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="mild_fever"> Mild Fever <span class="info-icon" data-symptom="mild_fever"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="mild_fever">Slightly elevated body temperature.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="fatigue"> Fatigue <span class="info-icon" data-symptom="fatigue"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="fatigue">Extreme tiredness or lack of energy.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="weight_loss"> Weight Loss <span class="info-icon" data-symptom="weight_loss"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="weight_loss">Unintentional loss of body weight.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="weight_gain"> Weight Gain <span class="info-icon" data-symptom="weight_gain"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="weight_gain">Unintentional gain of body weight.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="lethargy"> Lethargy <span class="info-icon" data-symptom="lethargy"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="lethargy">Lack of energy or enthusiasm.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="malaise"> Malaise <span class="info-icon" data-symptom="malaise"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="malaise">General feeling of discomfort or illness.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="cold_hands_and_feets"> Cold Hands and Feet <span class="info-icon" data-symptom="cold_hands_and_feets"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="cold_hands_and_feets">Unusually cold extremities.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="trembling"> Trembling <span class="info-icon" data-symptom="trembling"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="trembling">Shaking or quivering of the body.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="anxiety"> Anxiety <span class="info-icon" data-symptom="anxiety"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="anxiety">Feelings of nervousness or unease.</span></label><br>
                    </div>

                    <div class="category">
                        <h4>Other Symptoms</h4>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="yellowish_skin"> Yellowish Skin <span class="info-icon" data-symptom="yellowish_skin"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="yellowish_skin">Yellow tint to the skin, often indicating jaundice.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="yellowing_of_eyes"> Yellowing of Eyes <span class="info-icon" data-symptom="yellowing_of_eyes"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="yellowing_of_eyes">Yellowing of the whites of the eyes.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="dark_urine"> Dark Urine <span class="info-icon" data-symptom="dark_urine"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="dark_urine">Unusually dark-colored urine.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="burning_micturition"> Burning Micturition <span class="info-icon" data-symptom="burning_micturition"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="burning_micturition">Burning sensation during urination.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="bladder_discomfort"> Bladder Discomfort <span class="info-icon" data-symptom="bladder_discomfort"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="bladder_discomfort">Pain or discomfort in the bladder area.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="foul_smell_of_urine"> Foul Smell of Urine <span class="info-icon" data-symptom="foul_smell_of_urine"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="foul_smell_of_urine">Unpleasant odor in urine.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="polyuria"> Polyuria <span class="info-icon" data-symptom="polyuria"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="polyuria">Excessive urination.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="pain_behind_the_eyes"> Pain Behind the Eyes <span class="info-icon" data-symptom="pain_behind_the_eyes"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="pain_behind_the_eyes">Pain felt behind the eye sockets.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="brittle_nails"> Brittle Nails <span class="info-icon" data-symptom="brittle_nails"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="brittle_nails">Weak, easily broken nails.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="acute_liver_failure"> Acute Liver Failure <span class="info-icon" data-symptom="acute_liver_failure"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="acute_liver_failure">Rapid loss of liver function.</span></label><br>
                        <label class="symptom-label"><input type="checkbox" name="symptoms" value="extra_marital_contacts"> Extra Marital Contacts <span class="info-icon" data-symptom="extra_marital_contacts"><i class="fas fa-info-circle"></i></span><span class="symptom-description" data-symptom="extra_marital_contacts">Engaging in sexual activity outside of marriage.</span></label><br>
                    </div>
                </div>

                <div class="description-container">
                    <h4>Describe Your Symptoms</h4>
                    <textarea id="symptomDescription" rows="4" placeholder="Describe your symptoms in detail..."></textarea>
                    <button type="button" class="suggest-button" onclick="suggestSymptoms()">Suggest Symptoms</button>
                    <div id="suggestedSymptoms" class="suggested-symptoms"></div>
                </div>

                <div id="errorMessage" class="error-message"></div>
                <button type="submit" class="submit-button">Submit Symptoms</button>
            </form>
        </div>
    </main>

    <script>
        // Incompatible symptom pairs
        const incompatiblePairs = [
            ['high_fever', 'cold_hands_and_feets'],
            ['weight_gain', 'weight_loss'],
            ['fever', 'cold_hands_and_feets'],
            ['mild_fever', 'cold_hands_and_feets'],
            ['increased_appetite', 'loss_of_appetite'],
            ['fever', 'high_fever'],
            ['fever', 'mild_fever'],
            ['high_fever', 'mild_fever']
        ];

        // Selection limits
        const maxSelections = 17;
        const minSelections = 2;

        // DOM elements
        const checkboxes = document.querySelectorAll('input[name="symptoms"]');
        const errorMessage = document.getElementById('errorMessage');

        // Ensure checkboxes exist
        if (!checkboxes.length) {
            console.error('No checkboxes found with name="symptoms". Check your HTML.');
        }

        // Toggle symptoms section visibility
        document.getElementById('symptomButton').addEventListener('click', function () {
            const section = document.getElementById('symptomsSection');
            section.style.display = section.style.display === 'none' ? 'block' : 'none';
        });

        // Toggle symptom description on click
        document.querySelectorAll('.info-icon').forEach(icon => {
            icon.addEventListener('click', function () {
                const symptom = this.getAttribute('data-symptom');
                const description = document.querySelector(`.symptom-description[data-symptom="${symptom}"]`);
                const isVisible = description.classList.contains('visible');

                // Hide all descriptions
                document.querySelectorAll('.symptom-description').forEach(desc => {
                    desc.classList.remove('visible');
                });

                // Toggle the clicked description
                if (!isVisible) {
                    description.classList.add('visible');
                }
            });
        });

        // Handle checkbox changes
        function handleCheckboxChange(event) {
            const checkbox = event.target;
            const selectedSymptoms = Array.from(document.querySelectorAll('input[name="symptoms"]:checked')).map(cb => cb.value);
            const checkedCount = selectedSymptoms.length;

            // Check for incompatible selections
            if (checkbox.checked) {
                for (const [symptom1, symptom2] of incompatiblePairs) {
                    if (checkbox.value === symptom1 && selectedSymptoms.includes(symptom2)) {
                        alert(`Cannot select ${symptom1} with ${symptom2}. Please deselect ${symptom2}.`);
                        checkbox.checked = false;
                        console.log(`Blocked ${symptom1} due to ${symptom2} being selected.`);
                        return;
                    } else if (checkbox.value === symptom2 && selectedSymptoms.includes(symptom1)) {
                        alert(`Cannot select ${symptom2} with ${symptom1}. Please deselect ${symptom1}.`);
                        checkbox.checked = false;
                        console.log(`Blocked ${symptom2} due to ${symptom1} being selected.`);
                        return;
                    }
                }
            }

            // Update selected symptoms after potential deselection
            const updatedSelectedSymptoms = Array.from(document.querySelectorAll('input[name="symptoms"]:checked')).map(cb => cb.value);

            // Manage checkbox states
            checkboxes.forEach(cb => {
                if (!cb.checked) {
                    let isIncompatible = false;
                    for (const [symptom1, symptom2] of incompatiblePairs) {
                        if ((cb.value === symptom1 && updatedSelectedSymptoms.includes(symptom2)) ||
                            (cb.value === symptom2 && updatedSelectedSymptoms.includes(symptom1))) {
                            isIncompatible = true;
                            break;
                        }
                    }
                    cb.disabled = (checkedCount >= maxSelections) || isIncompatible;
                } else {
                    cb.disabled = false; // Ensure checked checkboxes are not disabled
                }
            });

            // Update error message
            updateErrorMessage(checkedCount);
        }

        // Update error message based on selection count
        function updateErrorMessage(checkedCount) {
            if (checkedCount < minSelections) {
                errorMessage.textContent = `Please select at least ${minSelections} symptoms.`;
                errorMessage.classList.add('visible');
            } else if (checkedCount > maxSelections) {
                errorMessage.textContent = `Please select no more than ${maxSelections} symptoms.`;
                errorMessage.classList.add('visible');
            } else {
                errorMessage.textContent = '';
                errorMessage.classList.remove('visible');
            }
        }

        // Initialize checkbox states
        function initializeCheckboxes() {
            const selectedSymptoms = Array.from(document.querySelectorAll('input[name="symptoms"]:checked')).map(cb => cb.value);
            const checkedCount = selectedSymptoms.length;

            // Validate initial selections for incompatibilities
            for (const [symptom1, symptom2] of incompatiblePairs) {
                if (selectedSymptoms.includes(symptom1) && selectedSymptoms.includes(symptom2)) {
                    console.warn(`Incompatible symptoms ${symptom1} and ${symptom2} both selected on load.`);
                    // Optionally uncheck one of the symptoms
                    const checkbox = document.querySelector(`input[value="${symptom2}"]`);
                    if (checkbox) {
                        checkbox.checked = false;
                    }
                }
            }

            // Update selected symptoms after validation
            const updatedSelectedSymptoms = Array.from(document.querySelectorAll('input[name="symptoms"]:checked')).map(cb => cb.value);

            // Set checkbox states
            checkboxes.forEach(cb => {
                if (!cb.checked) {
                    let isIncompatible = false;
                    for (const [symptom1, symptom2] of incompatiblePairs) {
                        if ((cb.value === symptom1 && updatedSelectedSymptoms.includes(symptom2)) ||
                            (cb.value === symptom2 && updatedSelectedSymptoms.includes(symptom1))) {
                            isIncompatible = true;
                            break;
                        }
                    }
                    cb.disabled = (checkedCount >= maxSelections) || isIncompatible;
                }
            });

            // Update error message
            updateErrorMessage(checkedCount);
        }

        // Attach event listeners
        checkboxes.forEach(checkbox => {
            checkbox.removeEventListener('change', handleCheckboxChange); // Prevent duplicates
            checkbox.addEventListener('change', handleCheckboxChange);
        });

        // Run initialization
        document.addEventListener('DOMContentLoaded', initializeCheckboxes);

        // Prevent form submission if selection limits are not met
        document.getElementById('symptomForm').addEventListener('submit', function (event) {
            const checkedCount = document.querySelectorAll('input[name="symptoms"]:checked').length;
            if (checkedCount < minSelections || checkedCount > maxSelections) {
                event.preventDefault();
                updateErrorMessage(checkedCount);
            }
        });

        // Suggest symptoms based on description
        function suggestSymptoms() {
            const description = document.getElementById('symptomDescription').value.trim();
            const suggestedDiv = document.getElementById('suggestedSymptoms');

            if (!description) {
                suggestedDiv.textContent = 'Please enter a description.';
                return;
            }

            fetch('/suggest_symptoms', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ description })
            })
            .then(response => response.json())
            .then(symptoms => {
                if (symptoms.length === 0) {
                    suggestedDiv.textContent = 'No symptoms suggested. Please refine your description.';
                    return;
                }

                suggestedDiv.textContent = `Suggested symptoms: ${symptoms.join(', ')}`;
                const selectedSymptoms = Array.from(document.querySelectorAll('input[name="symptoms"]:checked')).map(cb => cb.value);

                symptoms.forEach(symptom => {
                    let isCompatible = true;
                    for (const [symptom1, symptom2] of incompatiblePairs) {
                        if ((symptom === symptom1 && selectedSymptoms.includes(symptom2)) ||
                            (symptom === symptom2 && selectedSymptoms.includes(symptom1))) {
                            isCompatible = false;
                            console.log(`Suggested symptom ${symptom} is incompatible with ${selectedSymptoms.includes(symptom1) ? symptom1 : symptom2}`);
                            break;
                        }
                    }

                    const checkbox = document.querySelector(`input[value="${symptom}"]`);
                    if (checkbox && !checkbox.checked && !checkbox.disabled && isCompatible) {
                        const checkedCount = document.querySelectorAll('input[name="symptoms"]:checked').length;
                        if (checkedCount < maxSelections) {
                            checkbox.checked = true;
                            checkbox.dispatchEvent(new Event('change')); // Trigger change event
                        }
                    }
                });
            })
            .catch(error => {
                suggestedDiv.textContent = 'Error suggesting symptoms.';
                console.error('Error:', error);
            });
        }
    </script>
</body>
</html>